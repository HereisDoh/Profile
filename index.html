<canvas id="gameCanvas"></canvas>

<script>
canvas.style.pointerEvents = "auto"; // allow mouse events

let playerX = canvas.width / 2;
let catcherWidth = 150;
let catcherHeight = 30;

canvas.addEventListener("mousemove", (e) => {
  const rect = canvas.getBoundingClientRect();
  playerX = e.clientX - rect.left;
});

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (currentGame === "catch") {
    // spawn falling stars
    if (Math.random() < 0.03) {
      let typeRand = Math.random();
      let type = "normal";
      let color = "yellow";
      let points = 1;

      if (typeRand < 0.1) {
        type = "negative";
        color = "orange";
        points = -2;
      } else if (typeRand < 0.25) {
        type = "bonus";
        color = "green";
        points = 3;
      }

      stars.push({
        x: Math.random() * canvas.width,
        y: 0,
        size: 25,
        color: color,
        points: points
      });
    }

    // update + draw stars
    for (let i = 0; i < stars.length; i++) {
      let s = stars[i];
      s.y += 2;
      ctx.fillStyle = s.color;
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
      ctx.fill();

      // collision check
      if (
        s.y > canvas.height - catcherHeight - 10 &&
        Math.abs(s.x - playerX) < catcherWidth / 2
      ) {
        stars.splice(i, 1);
        i--;
        score += s.points;
        scoreDisplay.textContent = "Score: " + score;
      } else if (s.y > canvas.height) {
        stars.splice(i, 1);
        i--;
      }
    }

    // draw catcher
    ctx.fillStyle = "red";
    ctx.fillRect(
      playerX - catcherWidth / 2,
      canvas.height - catcherHeight - 10,
      catcherWidth,
      catcherHeight
    );
    ctx.strokeStyle = "white";
    ctx.strokeRect(
      playerX - catcherWidth / 2,
      canvas.height - catcherHeight - 10,
      catcherWidth,
      catcherHeight
    );
  }

  animationFrameId = requestAnimationFrame(gameLoop);
}
</script>
